<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/product_style.css">
    <link rel="stylesheet" href="./assets/color.css">
    <link rel="stylesheet" href="./assets/fonts/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <title>Document</title>
</head>
<body>

    <div id="header">
        <div class="nav_bar">
            <a href="./index.html" class="sign">
            </a>
            <div class="nav_right">
                <ul class="nav_list">
                    <li class="nav_item">
                        <a href="./index.html">Homepages</a>
                    </li>
                    <li class="nav_item">
                        <a href="./about.html">About Us</a>
                    </li>

                    <li class="nav_item nav_shop">
                        <a href="#">Shop</a>

                        <ul class="subnav">
                            <li class="subnav_item"><a href="./shop.html">Shop Page</a></li>
                            <li class="subnav_item"><a href="./checkout.html">Check Out</a></li>
                            <li class="subnav_item"><a href="./account.html">My Account</a></li>
                        </ul>
                    </li>

                    <li class="nav_item">
                        <a href="./blog.html">Blog</a>
                    </li>
                    <li class="nav_item">
                        <a href="./contact.html">Contact</a>
                    </li>
                </ul>   

                <div class="nav_btns">
                    <div class="wine_btn">
                        <a href="404.html">Wine From $40</a>
                    </div>
                    <a href="./cart.html" style="text-decoration: none;">
                        <d class="cart_btn">
                            <p class="money">$0.00</p>
                            <i class="ti-shopping-cart"></i>
                            <div class="cart_quantity">
                                <p>0</p>
                            </div>
                        </d>
                    </a>
                </div>
            </div>

        </div>
    </div>

    <div id="content">
        <div id="product">
            <div class="product_container">
                <div class="product_left">
                    <div class="zoomer">
                        <img class="product_img" src="" alt="">
                        <div class="mirror hide"></div>
                    </div>
                    
                </div>
                <div class="product_right">
                    <div class="breadcrum">
                        <a href="">Home</a> / <a href="">Shop</a> / <a href="">Uncategorized</a> /  <span id="product_name"></span>
                    </div>
                    <h1 class="product_name"><span></span></h1>
                    <h2 class="product_price"><span></span></h2>
                    <p  class="product_info"><span>Our high-quality wine is a sublime experience for the palate. Produced with carefully selected grapes harvested by hand, each bottle presents exceptional quality. With a rich color, fruity flavor, and intense aroma, this wine is perfect for those seeking a refined drink to complement special moments.</span></p>
                    <div class="add">
                        <input type="number" min="1" placeholder="" required id="" class="quantity_input">
                        <div class="add_btn">
                            <a href="">Add To Cart</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="description">
            <div class="des_container">
                <h2 class="des_header">Product Description</h2>
                <p class="des_info">Our high-quality wine is a sublime experience for the palate. Produced with carefully selected grapes harvested by hand, each bottle presents exceptional quality. With a rich color, fruity flavor, and intense aroma, this wine is perfect for those seeking a refined drink to complement special moments. Its fine texture and complex nuances of flavors make it a high-quality wine. The vintage is limited, and production is only in small quantities, allowing us to control every aspect of the production process, ensuring the quality and uniqueness of each bottle. Present the best this Valentine's Day with our high-quality wine.</p>
                <h2 class="des_header">About Returns & Delivery</h2>
                <p class="des_info">At our wine cellar, we are committed to quality and customer satisfaction. That's why we offer a fast and reliable delivery service so that products arrive in perfect condition. We work with experienced and carefully selected carriers to ensure the safety and integrity of our wines during transportation.Regarding returns, if any product is defective or does not meet the advertised standards, our return policy allows customers to request a product exchange or refund. To do so, simply contact our customer service team and report the problem. We will do our best to solve the problem quickly and efficiently to ensure our customers are satisfied.</p>
            </div>
        </div>
        
        <div id="related">
            <div class="related_container">
                <h1 class="related_header">Related Products</h1>
                <div class="related_products">
                    <div class="product">
                        <a href="./product.html" class="product_info">
                            <img class="product_img" src="./assets/img/product6.jpg" alt="">
                            <p class="product_name">Vinegloss Red Wine</p>
                            <span class="product_price">$129.00</span>
                        </a>
                        <div class="add_btn">
                            <p>Add To Cart</p>
                        </div>
                    </div>

                    <div class="product">
                        <a href="./product.html" class="product_info">
                            <img class="product_img" src="./assets/img/product4.jpg" alt="">
                            <p class="product_name">Vinegloss Blue Sky</p>
                            <span class="product_price">$119.00</span>
                        </a>
                        <div class="add_btn">
                            <p>Add To Cart</p>
                        </div>
                    </div>

                    <div class="product">
                        <a href="./product.html" class="product_info">
                            <img class="product_img" src="./assets/img/product2.jpg" alt="">
                            <p class="product_name">Collection Red Wine</p>
                            <span class="product_price">$350.00</span>
                        </a>
                        <div class="add_btn">
                            <p>Add To Cart</p>
                        </div>
                    </div>

                    <div class="product">
                        <a href="./product.html" class="product_info">
                            <img class="product_img" src="./assets/img/product1.jpg" alt="">
                            <p class="product_name">Collection Blue Wine</p>
                            <span class="product_price">$350.00</span>
                        </a>
                        <div class="add_btn">
                            <p>Add To Cart</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer">
        <div id="social">
                <div class="social_left">
                    <h2 class="social_header">We Are Synonymous With Quality</h2>
                    <h1 class="social_info">The Best Wine Made With <br> Carefully Selected Pinot Noir <br> Grapes</h1>
                </div>

                <div class="social_right">
                    <a href="" class="ti-facebook social_icon"></a>
                    <a href="" class="ti-twitter-alt social_icon"></a>
                    <a href="" class="ti-youtube social_icon"></a>
                    <a href="" class="ti-linkedin social_icon"></a>
                    <a href="" class="ti-instagram social_icon"></a>
                </div>
        </div>

        <div id="copy-right">
            <p class="left_item">&copy;2023 &minus; By ThienMy & ThanhDanh</p>
            <div class="right_item">
                <a href="" class="more_info">Terms & Conditions</a>
                <a href="" class="more_info">Refunds</a>
            </div>
        </div>
</div>
</body>

    <div id="toast">
        <!-- <div class="toast_container toast_success">
            <div class="toast_icon"><i class="bi bi-check-circle-fill"></i></div>
            <div class="toast_body">
                <h3 class="toast_title">Success</h3>
                <div class="toast_msg">Product successfully added to your shopping cart</div>
            </div>
            <div class="toast_close"><i class="bi bi-x"></i></div>
        </div>

        <div class="toast_container toast_error">
            <div class="toast_icon"><i class="bi bi-check-circle-fill"></i></div>
            <div class="toast_body">
                <h3 class="toast_title">Success</h3>
                <div class="toast_msg"><span class="item_name">cart</div>
            </div>
            <div class="toast_close"><i class="bi bi-x"></i></div>
        </div> -->


    </div>

<script>
    let img = document.querySelector('.zoomer .product_img');
    let mirror  = document.querySelector('.mirror');
    let scope = 2;

    var breadcrumName = document.querySelector('.product_right #product_name');
    var productName = document.querySelector('.product_right .product_name')
    var productPrice = document.querySelector('.product_right .product_price');

    img.setAttribute('src', localStorage.getItem('imgSrc'));
    breadcrumName.innerHTML = localStorage.getItem('productName');
    productName.innerHTML = localStorage.getItem('productName');
    productPrice.innerHTML = localStorage.getItem('productPrice');


    img.addEventListener('mousemove', function(e){

        // Khi di chuột vào thì mirror sẽ bỏ class ẩn
        mirror.classList.remove('hide');

        // Lấy dài rộng của hình
        let w = this.offsetWidth ;
        let h = this.offsetHeight;

        // Set tọa độ cho mirror
        mirror.style.top = `${e.clientY}px`;    
        mirror.style.left = `${e.clientX}px`;

        // Chỉnh background của mirror với tỉ lệ là scope
        mirror.style.backgroundSize = `${w * scope} ${h * scope}`;

        // Lấy tọa độ của chuột trên ảnh theo tỷ lệ phần trăm
        var percentMouseOfWidth = (e.offsetX / this.offsetWidth) * 100;
        var percentMouseOfHeight = (e.offsetY / this.offsetHeight) * 100;

        // Set tọa độ của chuột trên ảnh vào mirror background
        mirror.style.backgroundPosition = `${percentMouseOfWidth}% ${percentMouseOfHeight}%`;

        // Tìm source của ảnh
        // var imgsrc = e.target.getAttribute('src')
        var imgsrc = this.getAttribute('src');
        // console.log(imgsrc) 

        // Set source ảnh cho mirror
        mirror.style.backgroundImage = `url(${imgsrc})`;
    })

    // Khi di ra ngoài ảnh thì mirror add class hide
    img.addEventListener('mouseleave', function(e){
        mirror.classList.add('hide');
    })



    function toast({
        title = '',
        message = '',
        type = '',
        duration = ''}){
            const main = document.getElementById('toast');
            if (main){
                const toastCont = document.createElement('div');

                const autoRemove =  setTimeout(function(){
                    main.removeChild(toastCont);
                }, duration + 1000);

                toastCont.onclick = function(e){
                    if(e.target.closest('.toast_close')){
                        main.removeChild(toastCont);
                        clearTimeout(autoRemove);
                    }
                }

                const icons = {
                    success: 'bi bi-check-circle-fill',
                    error: 'bi bi-exclamation-triangle-fill',
                }
                const icon = icons[type]
                const delay = (duration/1000).toFixed(2);

                toastCont.classList.add('toast_container', `toast_${type}`);
                toastCont.style.animation = `slideInLeft ease .3s, fadeOut linear 1s ${delay}s forwards`;
                toastCont.innerHTML = `
                    <div class="toast_icon">
                        <i class="${icon}"></i>
                    </div>
                    <div class="toast_body">
                        <h3 class="toast_title">${title}</h3>
                        <div class="toast_msg">${message}</div>
                    </div>
                    <div class="toast_close"><i class="bi bi-x"></i></div>
                `;

                main.appendChild(toastCont);

                
            }
    }

   
    function showSuccessToast(){
        toast({
            title: 'Success',
            message: 'Product successfully added to your shopping cart',
            type: 'success',
            duration: 3000
        })
    }

    function showErrorToast(){
        toast({
            title: 'Error',
            message: 'Can not add product to your shopping cart',
            type: 'error',
            duration: 3000
        })
    }

    var addBtns = document.querySelectorAll('.add_btn');
    addBtns.forEach(function(item){
        item.addEventListener('click',showSuccessToast);
    })



    var productRelated = document.querySelectorAll('.related_products .product');

    function showProduct(){
            localStorage.setItem('imgSrc', this.querySelector('.product_img').getAttribute('src'));
            localStorage.setItem('productName', this.querySelector('.product_name').innerHTML);
            localStorage.setItem('productPrice', this.querySelector('.product_price').innerHTML);


            console.log(localStorage);
            // localStorage.setItem('productName', item.querySelector('.product_name'));
    }

    productRelated.forEach(function(item){
        item.addEventListener('click', showProduct)
    })

</script>
</html>
